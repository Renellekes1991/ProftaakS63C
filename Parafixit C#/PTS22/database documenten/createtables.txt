CREATE SEQUENCE KLANTSEQ START WITH 1 INCREMENT BY 1 NOMAXVALUE;
CREATE TABLE KLANT(
	klantnr			NUMBER		PRIMARY KEY,
	voornaam		VARCHAR(20)	,
	achternaam		VARCHAR(20)	NOT NULL,
	tussenvoegsel	VARCHAR(5)	,
	woonplaats		VARCHAR(20)	NOT NULL,
	straat			VARCHAR(20)	NOT NULL,
	huisnummer		VARCHAR(5)	NOT NULL,
	postcode		VARCHAR(6)  NOT NULL,
	email			VARCHAR(30)	NOT NULL,
	telefoon		VARCHAR(20)	NOT NULL,
	land			VARCHAR(20)	,
	verwijderd		NUMBER		NOT NULL,
CONSTRAINT VerwCHK CHECK (verwijderd BETWEEN 0 AND 1)
);
CREATE TABLE PRODUCT(
	serienummer		VARCHAR(255) PRIMARY KEY,
	omschrijving	VARCHAR(20)	NOT NULL,
	aankoop_date	VARCHAR(40)	NOT NULL,
	garantie_duur	VARCHAR(40)	NOT NULL,
	aankplaats		VARCHAR(40)	,
	klantnr			NUMBER		NOT NULL,

CONSTRAINT ProdKlantFK FOREIGN KEY (klantnr) REFERENCES KLANT (klantnr)
);

CREATE TABLE CATEGORIE(
	naam		VARCHAR(60)		PRIMARY KEY,
	omschrijving	VARCHAR(255)
);
CREATE SEQUENCE TICKETSEQ START WITH 1 INCREMENT BY 1 NOMAXVALUE;
CREATE TABLE TICKET(
ticketnr		NUMBER 			PRIMARY KEY,
status			NUMBER			NOT NULL,
opmerking		VARCHAR(255)	NOT NULL,
locatie			VARCHAR(4)		NOT NULL,
verw_oplostijd	NUMBER 			,
verw_kosten		NUMBER 			,
klantnr			NUMBER			NOT NULL,
serienr			VARCHAR(255) 	,
land			VARCHAR(30)		,
categorie		VARCHAR(60)		NOT NULL,
CONSTRAINT StatCHK CHECK (status BETWEEN 0 AND 3),
CONSTRAINT TicketKlantFK FOREIGN KEY (klantnr) REFERENCES KLANT (klantnr),
CONSTRAINT ProductTicketFK FOREIGN KEY (serienr) REFERENCES PRODUCT (serienummer),
CONSTRAINT TicketCategorieFK FOREIGN KEY (categorie) REFERENCES CATEGORIE (naam)
);
CREATE SEQUENCE REGISTRATIESEQ START WITH 1 INCREMENT BY 1 NOMAXVALUE;
CREATE TABLE TICKETREGISTRATIE(
trnr		NUMBER 			PRIMARY KEY,
mednr		NUMBER			NOT NULL,
ticketnr	NUMBER			NOT NULL,
datumtijd	TIMESTAMP(0)	NOT NULL,
melding		LONG			NOT NULL,
CONSTRAINT TicketRegTicketFK FOREIGN KEY (ticketnr) REFERENCES TICKET (ticketnr)
);
CREATE TABLE REPARATIEREGISTRATIE(
rrnr		NUMBER 			PRIMARY KEY,
mednr		NUMBER			NOT NULL,
ticketnr	NUMBER			NOT NULL,
datumtijd	TIMESTAMP(0)	NOT NULL,
melding		LONG			NOT NULL,
uren		NUMBER			NOT NULL,
CONSTRAINT RepRegTicketFK FOREIGN KEY (ticketnr) REFERENCES TICKET (ticketnr)
);
CREATE SEQUENCE MEDEWERKERSEQ START WITH 1 INCREMENT BY 1 NOMAXVALUE;
CREATE TABLE MEDEWERKER(
	mednr			NUMBER	PRIMARY KEY,
	naam			VARCHAR(50)	NOT NULL,
	functie			NUMBER		NOT NULL,
	afd				VARCHAR(40)	NOT NULL,
	telnr			VARCHAR(10)	NOT NULL,
	password		VARCHAR(16)	NOT NULL
);
CREATE SEQUENCE VERVONDERDSEQ START WITH 1 INCREMENT BY 1 NOMAXVALUE;
CREATE TABLE VERVONDERD(
	vervonderdnr	NUMBER			PRIMARY KEY,
	klantnr			NUMBER			NOT NULL,
	productnaam		VARCHAR(255) 	NOT NULL,
	kosten			NUMBER			NOT NULL,
	rrnr		NUMBER 				NOT NULL,
	
CONSTRAINT VervonderdRepRegFK FOREIGN KEY (rrnr) REFERENCES reparatieregistratie (rrnr)	
);
INSERT INTO CATEGORIE (naam, omschrijving) VALUES ('Softwarematig met dataherstel', '');
INSERT INTO CATEGORIE (naam, omschrijving) VALUES ('Softwarematig zonder dataherstel', '');
INSERT INTO CATEGORIE (naam, omschrijving) VALUES ('hardwarematig met dataherstel', '');
INSERT INTO CATEGORIE (naam, omschrijving) VALUES ('hardwarematig zonder dataherstel', '');
INSERT INTO MEDEWERKER (mednr, naam, functie, afd, telnr, password) VALUES (MEDEWERKERSEQ.nextval,'Aministrator', 3,'administr','0000000000','appel');